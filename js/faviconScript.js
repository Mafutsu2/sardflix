const head = document.head || document.getElementsByTagName('head')[0];
let favicons = [];

const loadFavicon = () => {
  const base64 = [
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAP7SURBVHjaxJdfaFtVHMc/5/5LmqSpXVeTzZruj/9omcN1EydiGd0E558Hh39AdIIvQ8GBbG+CoIgPIsOnqfjkQx+UCd3m2KBinUhXpbUKChtbqJ3tuq2uf9alS3LvPT7khF1vb5Ib7dwPQs45v985v29+/yOklNxK0rjFJM7dv72qQOyqy6U2g979TRQjAjN/w2JSsiqa1LdJh7b8gr1ZaKIduAYkgPPAN0AfMFHpfaOmiVwoRgS5pIa1KAFSwHtAj26IO2bO501Nh1iziWv/w51bgGeAA8BR4B3gl7pdkI8KVk7YpMdsrqR0NJcTwKtGRFsjNMy+t7KcPDhJQ9JAaCLoCUsBGQU+B+70MvW9qXXV9DfaljATV2Wxc6jAWIfFxYyxJz4v0y4gBETiOumOOMm0hWPXDOiN6vtEWABdQnLuely03zbtzHYO5TO/PRR9YW6l1hxZkDgS2rsaWZGJsjjvIESouNuqYmIkVBAq8x1ydUj9YTPa3cCXbySJLLrodqC8A8wDcWX+ICoC7cAFIwTiCQDNITuT0vvv+Tkv2s4WR8bvNZ9OzLo9wGXgFDAJDKnvb4G7gOeBdwG/bUzgEeCIEZ9zl2gsxDRsA2TpWsrVeCWak0cTs+5fhajALYXup+oXukAhAPhZlS3fAwMBID4EthqT680bea1EWqYcGmdczILE1TgczUmm1hic6YrQ+qeNVaoFLnA9hAVPAseAJ3zntwNpo3df0xIAzRcdWqZsMqeLANiW4PSmCNkNFquzRRy9VKCWgwzpNYwsGerCWoPx+0xGuxsQUlJoEMTmJE3TLpdXG1h5FytP2RX/DYBRXJq7iTnptYghJBtVQD0XW5CfAO+7y9RFqmaBkLwOvA20Kvs4y93AKgGIAoeAnWp/DNirIpubDeBZ4AvP/gFVx/+XeaDHp3zgZir3A2gGen38wxXu7QQGgR/UZ9Djrn/tgo9UcfDS1759K/Cx6g8EyH4F7FHluS4A24GX/KMAMOtTPuzv5wGNawPQqRpOKBesANYH8M4Alzz7gzWUl+lu4LN6YmAb8FgAb9yz3g/sqsO1L6s7oQA8BeyoIfdawJmrgnagwp3usDFgVRkcAFqAVQHnI8CLaj0MbFru/wUPqh6uVwB4xLPuC+Bv8by/tpoFBtV49HBAyo2V20LA3WyFtbffD6l1RwB/GBg0gB+BdQEAADIVgF8Djnv2x9VZ3Ce3uYqF+4HvNIWyt07XfQBMe/bTauYPS/Oq8P1a9tFPITKhTL8rAH7ap3hhaBdwxR+E/cCbISbkx4FcAC+n8n+mxhs7lK7ALDigRubdni64oJrSo0Cbr0AFBVYKeFKN5gC2emu3ervfe+HvAQCqUCVRop/OrQAAAABJRU5ErkJggg==",
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAP+SURBVHjaxJddbFRFFMd/c7922127ZLdSKK3SYooxuGnqR9AUjQY/QHhSJD4YjeEJHzBRfNIX8MHERBLjR+IL+kBjwJAYscQAYlo/QoVEH/zmQ2rSurVF6LZ0d3vvjA9Ow83de+/uhjb+k0lm5sw5939nzpxzRpzLbyQOzUXJRKfFgd0ZXFtgVxRAEsgpSV+yxdwkPbWqMuvlhSE6gKtAChgDTgH7gcEo+xY1IBR4pmAmY5CYUwhFuxJ8Aaw1HaEujZaEaRmkshaeqwBatGqnbk8As8B24LOgfaMWgVKzQduoS+9wiX/aTKTJoFCsNW2BYQpxYt+fjAz8RaLFQhgiykwK+BR4A8g1sgM98w5r7ApHt701jTQFZx5Iki14SFchBNzz7EqshKBcdFFKxW4m8BKwGti2MGnuauuOU+oUiuFKQjxpSHK9Q6X+87c7G8e77FRTUSEltHY3kc7ZVK56CCGoA7cB7cARAFHLCfXiC9LAyRY8RntsDrycwbMETjn0j6eBE8BdQEeM3ZuBUasOxs8BjiE5WMwaB9v/cNNto94PF9bZW52yehQoAMM+r58BJrXu3frsl4fY3Q58bDXNVv9FOSmQBghIKoFQgh3pK/KDZZPSm0sJXBtQfA/srUF+BNgAnAZuCMh2Ajdal5ZfuwhKH2Gu4GHNg/Ao2RW1F+Bc3ubbzQ6rzs5juQpDUi9+A4aAxwLzK4EOa2D3sioCKy66GFKRmZS0jnuMdVn83uswvtokNy5pnlGkputnEAdrLl3tuT/fmUCa/wUhBEgD0pclHWddKkmDShJM9xrh6yLglKp9wCl5/uEafW+f8iyRN131HrBzMT5eKxCtAN4HturxFDAAHGUREUWgBzipYwDAi8CbLAHCCDwMfO4b9wNfs0QIJqMXAh8/HPPxNJDRLb0YBPLAvoD8cITeHqCoo2BB9/dcL4G3A7KKjukEjmMKeFWPE7qh56b0moYI2Lpo2BCQKcAfbdbrmJ+NsZcFvgS6GyHQDnSFyL4DJnzjd+q0aQKHGiFwL3B/iOxKIHH0NbCzfVqnLgIPahJx5dRrIfMu8DzweoTe5nrjQApojnHQRIT8JPCu7t8BPNRovbmwyNUtiE1AL3CLz9P9OBLR9+vfpH9wfcQOuhZwTFcsj4QsOhVD/nxE34+ffMcYxFfAMUNXLd9EGHB0C2IMOO4bH9dzYf6TirD9ETBoAL/qu9sI9gMl//OhwSw5p19LUwuOMgSsAy7XoXwIeCVkfkcgj0ThovatiaCn/qgj4ukIxTLwIfBMjPGnY/IHOrHdp+vE0HS8UM/fqu94vw5In+htr7VDfwOPA63ALmCLzikjOpL+Uv32jH9OLTkM/mf8OwDtcCYaBJ8D8gAAAABJRU5ErkJggg==",
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAPuSURBVHjaxJdbaBxVGMd/5+zMbszG7W5zr8Y2La0YH8RSYxAvLbXFxpZCal6EWMRCwRdRlCCKD4Ii5EH0wYr4FLRgoWAjlQotrYESmrZqFRWL1hq6LbHZXDab3czO5fiQE1jH2clua9MPhnP5vu+c/8x3HaGU4naS5DaT6B/qDePfBewGtgJtQA6IK0/9FaszzokIV+az7kkhuLaoYMcEpqV4dmCGpisO+TvD39Eos/8A8BawE4j6mZGo7MyOW72eC3X1pu25Kg2cAN4QHuP5hMSOCaRXvQnagEHgB6An6HIhBXckDIYPpDny5h8IiWnE5BrgBenxzWRzhJbLDg1pB6tGLAnA/wVeBvrCFJRSFAsu921fiTXrggLXVkgXMq0R1vxq0/feDLGCIpuSzdLDATKVANinAYSTAmvOZcPmFBFDMHvdRnow0yCpv+Ymnn976rG6GU9mWiP7pMtm4KlKALQCH4VcWwTmgAQQkVJQmHYWTCLAiUHEgR2DufbkdXd4fLWBdAF4CPh5KRPUAI8CZgB/GugHTuuDtgCrgIf12AU0FuLyxD0X7aH131sbp5ojSrpsBdZVEuYG8C7wTPDHZjcwXLJ3Uo+f6zEKSARFT+JJBYmMRy4p6+drxR7pEZUeIMC0FGZBoeR/AbQATQEAvvZdXs40wMIFcwnJ5Q6DxrSTWfWn84kdE8zXCpQQ5JKSq+0RDFtVlAeqotpZj9mU5LP+FVxda7L2pyIdZ+aJWnDpfpNcUpJPSCZbDIziLQBg2JBLSooxyYoJj7F7TX7bFMW0AF1rTAtqCgpP8v8D8OQCCMP2Xgf2x7PqUDzLF0pwQSicf2U+99YWI6nrx6vAOaEYBfYvZzV8R4fzBu3EDwIfA0d1uC9bOf4deBp4Sa+7gQLQu9z9wIe+UD6kS/tNA+gGRnSGPK3n3WVkv/StDwKpGwXQCBzWNu0CHtFPl947rGVK6ahv3QR8cCMATP22PSEyPcB5H4hpwPLJ9QFPVgvgU2B9BXJtwIGS9d/AxQC5dcDKSgG8BjxXBdg9WmeRxgJktgNbKgXwRJn9U9qpgrq/F5c4cxuw62ZS8Xe6P0Annk0+fitQH9INRYFo2Bdo12Mc6AzgHymZf1XGaRfLdWdYQzICrNbhVEod2qNTAaEFcKnMvDTCToXonwdGDOBboCEAAMDGMsDngGMl62N6L16hPsAoMCqBH3ViyFZh/0FgomQ9AQxU6UMHgTOLPjCpQ6cS+kWXWz8NaF4ltA04609ExzUjjKZ0PsgH8PLADiC9xBmv6LsCU/Fx7b179e+ZU9IN7wSatfOUozHgbuBxYEj/zKLP2qvPfr9U4Z8BAPICKvTMhmwDAAAAAElFTkSuQmCC",
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAPwSURBVHjaxJdtiFRVGMd/59w7MzmzuxPruutMom724oc0MUiRTDBqyQKD0ggJCSKyvgR+iKS+RJEguBQV9qUIyqggxI1VUUnUguwF0axWTC112S2nfZlxdl7uvacP+yjX6d6ZO2b6hwPnPOd57vnfe87zP89VL25fRR2sAJ4CFgFZ4AKQNJ45G09ZR7SlzpXG3R1K8yOQA0rVuMKuGtZsGqPzjEOxVdd7PnaI/SHgUyBVY28DsON6dn64Ott1PFo74896jlHAgDIsN4rBQlrjWgplaIhaelOBTUBfwOIAKK1ItNkc2jrE3t4zaEspK6ZQhts9i/6RLosFB0p0/eFQSuqGBGq/wBbgsXoBxhjKeYd5D0/FKRu8qsEYg1EwMs1i8c4JVr01TrFVU43zqPb4GfglCoH3Gi0+yQCcskdmbgplKYojDhoYmW4x52gl8/jmsQ2llLKKLWqt9ogBy6J8gZnAM3X8zgLfAfcBbUorSgVXtgQqCUXb3y49HxU6PYvXC2mN9qgAs4ChRgS667z5b8ADQqACdAAtvqxYCnSVkmpn9zGnL3vKuTPfrgvaYzWwGngC6G1EYB0QlIt5ScOTPtt5aadl3HtpW2IQK5vD6ZzHaIfeVkjrr5QhoQwYQHuQKJlAAjOATACB/cBxIsDywK4aTsyPc+6WGDMHKu6cI9UtANW4wliTBHNd1uS2mcY60BSS4x6j02w+WZ8ml9FkTrvcerhC9pTD+YzFWIfG04qhWfb/Q0AZqNwAlgszTjhMpDTf9kxBe5PbYxRoF6YUvchK2BQuLgDmXddW6+Jlc7R92P0YeB/4qxkl/K/YAWwFbgI2ymHdBky/VgT6gDUi6euBJLAS+AG47VoQ8GMzsEH6WWBANOWqEWgB0tJaQnzeALb7xruAF64GgVdFqIal5cUWhM9qxr3A/CslcI8UHq/IOCENseXEx4+9IuN+vH0lBG4G9gHtdXzagQPAYp9N1OAyLJX7J9YMgc8BK6LvO77+n3KT1qIbyEYl8BywsAmyCyXmIsYCfJYBS6ISWBFi3wg8DzgBc6+FlXWCJcDyqFIcRHQ38JL0HwHur72j5IBeCIlPAikt7IPeYJFUwXcBDwbMfxnSx5chbcC8kHgHcGx5k06gp8ahAxisc2GdDOn78VOd+IPAbhvol9PdE+AUtoeDwB7feI/YshHjAb4BDmkRj35goslbr+Qbl4APmhS1fcCA9uXqAuD3CIG7gKcD7C+LVjTCKHCHlHyXnc7jwL3A13WCvwCerDO/FvgQKIfMfy8KeOxSNRXyczpX8vtuIC6n/E2piKPgRvmpXSm35UFRx1//Xc4Zw/WE5jrjnwEAYw8uNhWBkjAAAAAASUVORK5CYII="
  ];
  
  base64.forEach(o => {
    let link = document.createElement('link');
    link.rel = 'shortcut icon';
    link.href = o;
    favicons.push(link);
  });
  
  setInterval(animate, 130);
};

const changeFavicon = (prev, curr) => {
  if(prev !== undefined)
    head.removeChild(favicons[prev]);
  head.appendChild(favicons[curr]);
}

const animate = () => {
  if(typeof animate.curr == 'undefined') {
    animate.curr = 0;
  }
  changeFavicon(animate.prev, animate.curr);
  animate.prev = animate.curr;
  animate.curr = animate.curr === 3 ? 0 : animate.curr + 1;
}